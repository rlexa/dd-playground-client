<div ddFlexbox="hyscsw">

  <div ddFlexbox="vys">
    <mat-list class="mat-list-auto-height">
      <h3 mat-subheader>Debug</h3>
      <mat-list-item>
        <mat-checkbox [checked]="viewDebug$ | async" (change)="onSetViewDebug($event.checked)">Debug View</mat-checkbox>
      </mat-list-item>
    </mat-list>

    <mat-list class="mat-list-auto-height">
      <h3 mat-subheader>Scene</h3>
      <mat-list-item>
        <div ddFlexbox="hyc">
          <label mat-line>Size:</label>
          <mat-slider [max]="factorMax$ | async" [min]="factorMin$ | async" [step]=".1" [value]="factor$ | async" [thumbLabel]="true"
            (change)="onSetFactor($event.value)"></mat-slider>
        </div>
      </mat-list-item>
      <mat-list-item>
        <mat-form-field *ngIf="renderers$ | async as renderers">
          <mat-select #renderer placeholder="Renderer" [ngModel]="renderer$ | async" (valueChange)="onSetRenderer($event); renderer.value = null;">
            <mat-option [value]="null">-</mat-option>
            <mat-option *ngFor="let key of renderers; trackBy: trackByIndex;" [value]="key">{{ key }}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-list-item>
      <mat-list-item>
        <mat-form-field *ngIf="themes$ | async as themes">
          <mat-select #sceneTheme placeholder="Themes" [ngModel]="theme$ | async" (valueChange)="onSetTheme($event);">
            <mat-option *ngFor="let key of themes; trackBy: trackByIndex;" [value]="key">{{ key }}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-list-item>
      <mat-list-item>
        <mat-form-field *ngIf="sceneFieldsPresetsKeys$ | async as sceneFieldsPresetsKeys">
          <mat-select #sceneFieldsPreset placeholder="Field Presets" (valueChange)="onSetFieldsPresetKey($event); sceneFieldsPreset.value = null;">
            <mat-option [value]="null">-</mat-option>
            <mat-option *ngFor="let key of sceneFieldsPresetsKeys; trackBy: trackByIndex;" [value]="key">{{ key }}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-list-item>
    </mat-list>
  </div>

  <div *ngIf="selectedField$ | async as field" ddFlexbox="vys">
    <mat-list class="mat-list-auto-height">
      <h3 mat-subheader>Field {{ selectedFieldIndex$ | async }}</h3>
      <mat-list-item>
        <mat-form-field *ngIf="fields$ | async as fields">
          <mat-select placeholder="Field" [ngModel]="field.field" (valueChange)="onMergeSelectedField_Field(field, $event);">
            <mat-option *ngFor="let key of fields; trackBy: trackByIndex;" [value]="key">{{ key }}</mat-option>
          </mat-select>
        </mat-form-field>
      </mat-list-item>

      <ng-container *ngIf="field.modifiers.length">
        <h3 mat-subheader>Field Modifiers</h3>
        <mat-list-item *ngFor="let item of field.modifiers">
          <p mat-line>{{ item }}</p>
        </mat-list-item>
      </ng-container>

      <ng-container *ngIf="selectedFieldEntities$ | async as entities">
        <ng-container *ngIf="entities.length">
          <h3 mat-subheader>Field Entities</h3>
          <mat-list-item *ngFor="let item of entities">
            <p mat-line>{{ item.name + ' HP:' + (item.health || 0) + ' V:' + (item.variant || 0) }}</p>
          </mat-list-item>
        </ng-container>
      </ng-container>

      <ng-container *ngIf="selectedFieldActor$ | async as item">
        <h3 mat-subheader>Field Actor</h3>
        <mat-list-item>
          <p mat-line>
            {{
            (item.isNpc ? 'NPC ' : '')
            + item.name
            + ' HP:' + (item.health || 0) + '/' + (item.healthMax || 0)
            + ' V:' + (item.variant|| 0)
            }}
          </p>
        </mat-list-item>
      </ng-container>
    </mat-list>
  </div>

</div>